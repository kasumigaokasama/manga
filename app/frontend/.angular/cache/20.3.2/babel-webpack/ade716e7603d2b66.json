{"ast":null,"code":"import _asyncToGenerator from \"C:/manga/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { CommonModule } from '@angular/common';\nimport { signal } from '@angular/core';\nimport { GlobalWorkerOptions, getDocument } from 'pdfjs-dist';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../services/api.service\";\nimport * as i3 from \"../services/settings.service\";\nimport * as i4 from \"../services/theme.service\";\nimport * as i5 from \"@angular/common\";\nconst _c0 = [\"pdfCanvas\"];\nfunction ReaderPage_span_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 13);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate2(\"(Seite \", ctx_r0.page(), \" / \", ctx_r0.totalPages, \")\");\n  }\n}\nfunction ReaderPage_div_22_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"input\", 14);\n    i0.ɵɵlistener(\"input\", function ReaderPage_div_22_Template_input_input_1_listener($event) {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r0 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r0.onScrub($event));\n    });\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"min\", 1)(\"max\", ctx_r0.totalPages)(\"value\", ctx_r0.page());\n  }\n}\nfunction ReaderPage_div_23_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 15);\n    i0.ɵɵlistener(\"pointerdown\", function ReaderPage_div_23_Template_div_pointerdown_0_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r0 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r0.onPointerDown($event));\n    })(\"pointerup\", function ReaderPage_div_23_Template_div_pointerup_0_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r0 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r0.onPointerUp($event));\n    });\n    i0.ɵɵelement(1, \"canvas\", 16, 0);\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ReaderPage_div_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 17)(1, \"p\", 18);\n    i0.ɵɵtext(2, \"EPUB-Dateien werden als Download ausgeliefert. Oeffne die Datei mit deinem bevorzugten Reader.\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"a\", 19);\n    i0.ɵɵtext(4, \"EPUB herunterladen\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"href\", ctx_r0.downloadUrl(), i0.ɵɵsanitizeUrl);\n  }\n}\nfunction ReaderPage_div_25_img_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 23);\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext(2);\n    i0.ɵɵstyleProp(\"transform\", \"scale(\" + ctx_r0.zoom() + \")\");\n    i0.ɵɵproperty(\"src\", ctx_r0.pageSrc(ctx_r0.nextIndexForSpread()), i0.ɵɵsanitizeUrl);\n  }\n}\nfunction ReaderPage_div_25_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 20);\n    i0.ɵɵlistener(\"pointerdown\", function ReaderPage_div_25_Template_div_pointerdown_0_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r0 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r0.onPointerDown($event));\n    })(\"pointerup\", function ReaderPage_div_25_Template_div_pointerup_0_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r0 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r0.onPointerUp($event));\n    });\n    i0.ɵɵelement(1, \"img\", 21);\n    i0.ɵɵtemplate(2, ReaderPage_div_25_img_2_Template, 1, 3, \"img\", 22);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵstyleProp(\"direction\", ctx_r0.rtl ? \"rtl\" : \"ltr\");\n    i0.ɵɵadvance();\n    i0.ɵɵstyleProp(\"transform\", \"scale(\" + ctx_r0.zoom() + \")\");\n    i0.ɵɵproperty(\"src\", ctx_r0.pageSrc(ctx_r0.page()), i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.spread);\n  }\n}\nfunction ReaderPage_div_26_button_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 26);\n    i0.ɵɵlistener(\"click\", function ReaderPage_div_26_button_1_Template_button_click_0_listener() {\n      const n_r6 = i0.ɵɵrestoreView(_r5).$implicit;\n      const ctx_r0 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r0.jump(n_r6));\n    });\n    i0.ɵɵelement(1, \"img\", 27);\n    i0.ɵɵelementStart(2, \"div\", 28);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const n_r6 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext(2);\n    i0.ɵɵclassProp(\"ring-2\", n_r6 === ctx_r0.page());\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"src\", ctx_r0.pageSrc(n_r6), i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(n_r6);\n  }\n}\nfunction ReaderPage_div_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 24);\n    i0.ɵɵtemplate(1, ReaderPage_div_26_button_1_Template, 4, 4, \"button\", 25);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.thumbPages());\n  }\n}\nconst workerSrc = new URL('pdfjs-dist/build/pdf.worker.min.js', import.meta.url);\nGlobalWorkerOptions.workerSrc = workerSrc.toString();\nexport let ReaderPage = /*#__PURE__*/(() => {\n  var _staticBlock;\n  class ReaderPage {\n    constructor(route, api, settings, theme) {\n      this.route = route;\n      this.api = api;\n      this.settings = settings;\n      this.theme = theme;\n      this.id = 0;\n      this.page = signal(1, ...(ngDevMode ? [{\n        debugName: \"page\"\n      }] : []));\n      this.zoom = signal(1, ...(ngDevMode ? [{\n        debugName: \"zoom\"\n      }] : []));\n      this.rtl = true;\n      this.spread = false;\n      this.format = 'images';\n      this.totalPages = null;\n      this.pdfDoc = null;\n      this.suppressSync = false;\n      this.keyListener = e => this.handleKey(e);\n      this.startX = 0;\n      this.id = Number(this.route.snapshot.paramMap.get('id'));\n      this.rtl = this.settings.readerRtl();\n      this.spread = this.settings.readerSpread();\n      this.loadBook();\n      this.loadProgress();\n      window.addEventListener('keydown', this.keyListener);\n    }\n    loadBook() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        try {\n          const {\n            book\n          } = yield _this.api.getBook(_this.id);\n          _this.book = book;\n          _this.format = book.format;\n          if (book.pageCount) _this.totalPages = book.pageCount;\n          if (_this.format === 'pdf') {\n            yield _this.loadPdf();\n          } else if (_this.format !== 'epub') {\n            _this.prefetchImages();\n          }\n        } catch (err) {\n          console.error('Konnte Buch nicht laden', err);\n        }\n      })();\n    }\n    loadProgress() {\n      var _this2 = this;\n      return _asyncToGenerator(function* () {\n        try {\n          const progress = yield _this2.api.getProgress(_this2.id);\n          if (progress?.page) {\n            _this2.suppressSync = true;\n            _this2.page.set(Math.max(1, progress.page));\n            _this2.suppressSync = false;\n            _this2.onPageChanged();\n          } else {\n            _this2.onPageChanged();\n          }\n        } catch {\n          _this2.onPageChanged();\n        }\n      })();\n    }\n    loadPdf() {\n      var _this3 = this;\n      return _asyncToGenerator(function* () {\n        const headers = {};\n        const token = _this3.api.token();\n        if (token) headers['Authorization'] = `Bearer ${token}`;\n        const url = `${_this3.api.base}/api/books/${_this3.id}/stream`;\n        _this3.pdfDoc = yield getDocument({\n          url,\n          httpHeaders: headers\n        }).promise;\n        try {\n          _this3.totalPages = _this3.pdfDoc.numPages;\n        } catch {\n          /* ignore */\n        }\n        yield _this3.renderPdf();\n      })();\n    }\n    renderPdf() {\n      var _this4 = this;\n      return _asyncToGenerator(function* () {\n        if (!_this4.pdfDoc) return;\n        const canvas = _this4.pdfCanvas?.nativeElement;\n        if (!canvas) return;\n        const current = Math.max(1, Math.min(_this4.pdfDoc.numPages, _this4.page()));\n        const page = yield _this4.pdfDoc.getPage(current);\n        const viewport = page.getViewport({\n          scale: _this4.zoom()\n        });\n        const ctx = canvas.getContext('2d');\n        canvas.width = viewport.width;\n        canvas.height = viewport.height;\n        const renderContext = {\n          canvasContext: ctx,\n          viewport\n        };\n        yield page.render(renderContext).promise;\n      })();\n    }\n    onPointerDown(ev) {\n      this.startX = ev.clientX;\n    }\n    onPointerUp(ev) {\n      const dx = ev.clientX - this.startX;\n      if (Math.abs(dx) > 40) {\n        if (dx > 0) {\n          this.rtl ? this.next() : this.prev();\n        } else {\n          this.rtl ? this.prev() : this.next();\n        }\n      }\n      this.startX = 0;\n    }\n    next() {\n      const delta = this.rtl ? -1 : 1;\n      this.setPage(this.page() + delta);\n    }\n    prev() {\n      const delta = this.rtl ? 1 : -1;\n      this.setPage(this.page() + delta);\n    }\n    zoomIn() {\n      this.zoom.set(Math.min(3, Number((this.zoom() + 0.1).toFixed(2))));\n      if (this.format === 'pdf') this.renderPdf();\n    }\n    zoomOut() {\n      this.zoom.set(Math.max(0.5, Number((this.zoom() - 0.1).toFixed(2))));\n      if (this.format === 'pdf') this.renderPdf();\n    }\n    toggleRtl() {\n      this.rtl = !this.rtl;\n      this.settings.setReaderRtl(this.rtl);\n      this.prefetchImages();\n      this.scheduleProgressSync();\n    }\n    toggleSpread() {\n      this.spread = !this.spread;\n      this.settings.setReaderSpread(this.spread);\n      this.prefetchImages();\n    }\n    fullscreen() {\n      const target = this.pdfCanvas?.nativeElement?.parentElement || document.documentElement;\n      target.requestFullscreen?.();\n    }\n    onScrub(event) {\n      const value = Number(event.target.value);\n      if (!Number.isFinite(value)) return;\n      this.setPage(value);\n    }\n    jump(n) {\n      this.setPage(n);\n    }\n    nextIndexForSpread() {\n      const delta = this.rtl ? -1 : 1;\n      const candidate = this.page() + delta;\n      if (!this.totalPages) return Math.max(1, candidate);\n      return Math.min(this.totalPages, Math.max(1, candidate));\n    }\n    thumbPages() {\n      if (!this.totalPages) return [];\n      const span = 6;\n      const current = this.page();\n      const start = Math.max(1, current - span);\n      const end = Math.min(this.totalPages, current + span);\n      const arr = [];\n      for (let i = start; i <= end; i++) arr.push(i);\n      return arr;\n    }\n    pageSrc(n) {\n      const safe = Math.max(1, n);\n      const token = this.api.token();\n      const url = new URL(`${this.api.base}/api/books/${this.id}/pages/${safe}`);\n      if (token) url.searchParams.set('token', token);\n      return url.toString();\n    }\n    streamUrl() {\n      const token = this.api.token();\n      const url = new URL(`${this.api.base}/api/books/${this.id}/stream`);\n      if (token) url.searchParams.set('token', token);\n      return url.toString();\n    }\n    downloadUrl() {\n      const token = this.api.token();\n      const url = new URL(`${this.api.base}/api/books/${this.id}/download`);\n      if (token) url.searchParams.set('token', token);\n      return url.toString();\n    }\n    setPage(newPage) {\n      const max = this.totalPages ?? Number.MAX_SAFE_INTEGER;\n      const clamped = Math.max(1, Math.min(max, Math.floor(newPage)));\n      this.page.set(clamped);\n      this.onPageChanged();\n    }\n    onPageChanged() {\n      if (this.format === 'pdf') {\n        this.renderPdf();\n      } else if (this.format !== 'epub') {\n        this.prefetchImages();\n      }\n      this.scheduleProgressSync();\n    }\n    scheduleProgressSync() {\n      if (this.suppressSync) return;\n      clearTimeout(this.progressTimer);\n      this.progressTimer = setTimeout(() => {\n        const current = this.page();\n        const percent = this.computePercent(current);\n        this.api.setProgress(this.id, current, percent).catch(() => {});\n      }, 400);\n    }\n    computePercent(page) {\n      if (!this.totalPages || this.totalPages <= 0) return 0;\n      return Number((page / this.totalPages * 100).toFixed(2));\n    }\n    prefetchImages() {\n      if (this.format === 'pdf' || this.format === 'epub') return;\n      clearTimeout(this.prefetchTimer);\n      this.prefetchTimer = setTimeout(() => {\n        const current = this.page();\n        const delta = this.rtl ? -1 : 1;\n        const candidates = [current + delta, current + 2 * delta];\n        for (const n of candidates) {\n          if (this.totalPages && (n < 1 || n > this.totalPages)) continue;\n          const img = new Image();\n          img.src = this.pageSrc(n);\n        }\n      }, 200);\n    }\n    handleKey(event) {\n      const key = event.key;\n      switch (key) {\n        case 'ArrowRight':\n          event.preventDefault();\n          this.rtl ? this.prev() : this.next();\n          break;\n        case 'ArrowLeft':\n          event.preventDefault();\n          this.rtl ? this.next() : this.prev();\n          break;\n        case '[':\n          event.preventDefault();\n          this.zoomOut();\n          break;\n        case ']':\n          event.preventDefault();\n          this.zoomIn();\n          break;\n        default:\n          {\n            const lower = key.toLowerCase();\n            if (lower === 'f') {\n              event.preventDefault();\n              this.fullscreen();\n            } else if (lower === 'r') {\n              event.preventDefault();\n              this.toggleRtl();\n            } else if (lower === 's') {\n              event.preventDefault();\n              this.toggleSpread();\n            } else if (lower === 'd') {\n              event.preventDefault();\n              this.theme.setSakura(!this.theme.sakura());\n            }\n          }\n      }\n    }\n    ngOnDestroy() {\n      window.removeEventListener('keydown', this.keyListener);\n      clearTimeout(this.progressTimer);\n      clearTimeout(this.prefetchTimer);\n    }\n    static #_ = _staticBlock = () => (this.ɵfac = function ReaderPage_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || ReaderPage)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.ApiService), i0.ɵɵdirectiveInject(i3.SettingsService), i0.ɵɵdirectiveInject(i4.ThemeService));\n    }, this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: ReaderPage,\n      selectors: [[\"app-reader\"]],\n      viewQuery: function ReaderPage_Query(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵviewQuery(_c0, 5);\n        }\n        if (rf & 2) {\n          let _t;\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.pdfCanvas = _t.first);\n        }\n      },\n      decls: 27,\n      vars: 9,\n      consts: [[\"pdfCanvas\", \"\"], [1, \"flex\", \"flex-col\", \"gap-3\"], [1, \"flex\", \"flex-wrap\", \"items-center\", \"gap-2\", \"justify-between\"], [1, \"font-semibold\"], [\"class\", \"text-sm text-gray-500\", 4, \"ngIf\"], [1, \"flex\", \"flex-wrap\", \"gap-2\", \"text-sm\"], [1, \"px-2\", \"py-1\", \"bg-gray-200\", \"rounded\", 3, \"click\"], [\"download\", \"\", 1, \"px-2\", \"py-1\", \"bg-matcha\", \"text-white\", \"rounded\", 3, \"href\"], [4, \"ngIf\"], [\"class\", \"bg-black/5 rounded\", 3, \"pointerdown\", \"pointerup\", 4, \"ngIf\"], [\"class\", \"p-6 border rounded bg-kumo text-center space-y-2\", 4, \"ngIf\"], [\"class\", \"flex gap-2 justify-center items-start\", 3, \"direction\", \"pointerdown\", \"pointerup\", 4, \"ngIf\"], [\"class\", \"mt-3 overflow-x-auto whitespace-nowrap py-2 border-t\", 4, \"ngIf\"], [1, \"text-sm\", \"text-gray-500\"], [\"type\", \"range\", 1, \"w-full\", 3, \"input\", \"min\", \"max\", \"value\"], [1, \"bg-black/5\", \"rounded\", 3, \"pointerdown\", \"pointerup\"], [1, \"mx-auto\", \"block\"], [1, \"p-6\", \"border\", \"rounded\", \"bg-kumo\", \"text-center\", \"space-y-2\"], [1, \"text-sm\"], [\"download\", \"\", 1, \"inline-block\", \"bg-matcha\", \"text-white\", \"px-4\", \"py-2\", \"rounded\", 3, \"href\"], [1, \"flex\", \"gap-2\", \"justify-center\", \"items-start\", 3, \"pointerdown\", \"pointerup\"], [\"alt\", \"page\", 1, \"max-w-full\", 3, \"src\"], [\"class\", \"max-w-full\", \"alt\", \"page2\", 3, \"transform\", \"src\", 4, \"ngIf\"], [\"alt\", \"page2\", 1, \"max-w-full\", 3, \"src\"], [1, \"mt-3\", \"overflow-x-auto\", \"whitespace-nowrap\", \"py-2\", \"border-t\"], [\"class\", \"inline-block mr-2 border rounded overflow-hidden focus:outline-none focus:ring\", 3, \"ring-2\", \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"inline-block\", \"mr-2\", \"border\", \"rounded\", \"overflow-hidden\", \"focus:outline-none\", \"focus:ring\", 3, \"click\"], [\"alt\", \"thumb\", \"width\", \"80\", \"height\", \"120\", \"loading\", \"lazy\", 3, \"src\"], [1, \"text-center\", \"text-xs\", \"text-gray-600\"]],\n      template: function ReaderPage_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 1)(1, \"div\", 2)(2, \"div\", 3);\n          i0.ɵɵtext(3, \" Reader \");\n          i0.ɵɵtemplate(4, ReaderPage_span_4_Template, 2, 2, \"span\", 4);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(5, \"div\", 5)(6, \"button\", 6);\n          i0.ɵɵlistener(\"click\", function ReaderPage_Template_button_click_6_listener() {\n            return ctx.toggleRtl();\n          });\n          i0.ɵɵtext(7);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(8, \"button\", 6);\n          i0.ɵɵlistener(\"click\", function ReaderPage_Template_button_click_8_listener() {\n            return ctx.toggleSpread();\n          });\n          i0.ɵɵtext(9);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(10, \"button\", 6);\n          i0.ɵɵlistener(\"click\", function ReaderPage_Template_button_click_10_listener() {\n            return ctx.zoomOut();\n          });\n          i0.ɵɵtext(11, \"-\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(12, \"button\", 6);\n          i0.ɵɵlistener(\"click\", function ReaderPage_Template_button_click_12_listener() {\n            return ctx.zoomIn();\n          });\n          i0.ɵɵtext(13, \"+\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(14, \"button\", 6);\n          i0.ɵɵlistener(\"click\", function ReaderPage_Template_button_click_14_listener() {\n            return ctx.fullscreen();\n          });\n          i0.ɵɵtext(15, \"Fullscreen\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(16, \"a\", 7);\n          i0.ɵɵtext(17, \"Original\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(18, \"button\", 6);\n          i0.ɵɵlistener(\"click\", function ReaderPage_Template_button_click_18_listener() {\n            return ctx.prev();\n          });\n          i0.ɵɵtext(19, \"\\u2190\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(20, \"button\", 6);\n          i0.ɵɵlistener(\"click\", function ReaderPage_Template_button_click_20_listener() {\n            return ctx.next();\n          });\n          i0.ɵɵtext(21, \"\\u2192\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵtemplate(22, ReaderPage_div_22_Template, 2, 3, \"div\", 8)(23, ReaderPage_div_23_Template, 3, 0, \"div\", 9)(24, ReaderPage_div_24_Template, 5, 1, \"div\", 10)(25, ReaderPage_div_25_Template, 3, 6, \"div\", 11)(26, ReaderPage_div_26_Template, 2, 1, \"div\", 12);\n          i0.ɵɵelementEnd();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngIf\", ctx.totalPages);\n          i0.ɵɵadvance(3);\n          i0.ɵɵtextInterpolate1(\"Richtung: \", ctx.rtl ? \"RTL\" : \"LTR\");\n          i0.ɵɵadvance(2);\n          i0.ɵɵtextInterpolate1(\"Spread: \", ctx.spread ? \"2-up\" : \"1-up\");\n          i0.ɵɵadvance(7);\n          i0.ɵɵproperty(\"href\", ctx.downloadUrl(), i0.ɵɵsanitizeUrl);\n          i0.ɵɵadvance(6);\n          i0.ɵɵproperty(\"ngIf\", ctx.totalPages && ctx.format !== \"epub\");\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.format === \"pdf\");\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.format === \"epub\");\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.format !== \"pdf\" && ctx.format !== \"epub\");\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.format !== \"pdf\" && ctx.format !== \"epub\" && ctx.totalPages);\n        }\n      },\n      dependencies: [CommonModule, i5.NgForOf, i5.NgIf],\n      encapsulation: 2\n    }));\n  }\n  _staticBlock();\n  return ReaderPage;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}