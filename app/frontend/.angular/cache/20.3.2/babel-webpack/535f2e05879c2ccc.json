{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { RouterLink, RouterOutlet } from '@angular/router';\nimport { MatToolbarModule } from '@angular/material/toolbar';\nimport { MatButtonModule } from '@angular/material/button';\nimport { BlossomsComponent } from './components/blossoms.component';\nimport { StarfieldComponent } from './components/starfield.component';\nimport { SakuraBranchComponent } from './components/sakura-branch.component';\nimport { PetalBurstComponent } from './components/petal-burst.component';\nimport { HelpModalComponent } from './components/help-modal.component';\nimport { ToastContainerComponent } from './components/toast-container.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./services/api.service\";\nimport * as i2 from \"./services/i18n.service\";\nimport * as i3 from \"./services/theme.service\";\nimport * as i4 from \"./services/burst.service\";\nimport * as i5 from \"./services/sound.service\";\nimport * as i6 from \"./services/toast.service\";\nimport * as i7 from \"@angular/common\";\nimport * as i8 from \"@angular/material/toolbar\";\nimport * as i9 from \"@angular/material/button\";\nconst _c0 = (a0, a1) => ({\n  \"bg-white text-aizome\": a0,\n  \"bg-slate-800 text-slate-100\": a1\n});\nfunction AppComponent_span_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 23);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate2(\"\", ctx_r1.api.email(), \" (\", ctx_r1.api.role(), \")\");\n  }\n}\nfunction AppComponent_a_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"a\", 24);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r1.i18n.t(\"upload\"));\n  }\n}\nfunction AppComponent_a_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"a\", 25);\n    i0.ɵɵtext(1, \"Admin\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AppComponent_button_20_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 16);\n    i0.ɵɵlistener(\"click\", function AppComponent_button_20_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.api.logout());\n    });\n    i0.ɵɵtext(1, \"Logout\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AppComponent_a_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"a\", 26);\n    i0.ɵɵtext(1, \"Login\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AppComponent_div_26_label_17_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"label\", 32)(1, \"input\", 33);\n    i0.ɵɵlistener(\"change\", function AppComponent_div_26_label_17_Template_input_change_1_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r1 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r1.theme.setStarfieldEnabled($event.target.checked));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(2, \" Sterne an \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"checked\", ctx_r1.theme.starfieldEnabled());\n  }\n}\nfunction AppComponent_div_26_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 27)(1, \"div\", 28);\n    i0.ɵɵtext(2, \"Theme Presets\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 29)(4, \"button\", 30);\n    i0.ɵɵlistener(\"click\", function AppComponent_div_26_Template_button_click_4_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r1 = i0.ɵɵnextContext();\n      ctx_r1.theme.preset(\"sakura-day\");\n      return i0.ɵɵresetView(ctx_r1.themeMenuOpen = false);\n    });\n    i0.ɵɵtext(5, \"Sakura Day\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"button\", 30);\n    i0.ɵɵlistener(\"click\", function AppComponent_div_26_Template_button_click_6_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r1 = i0.ɵɵnextContext();\n      ctx_r1.theme.preset(\"sakura-night\");\n      return i0.ɵɵresetView(ctx_r1.themeMenuOpen = false);\n    });\n    i0.ɵɵtext(7, \"Night\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"button\", 30);\n    i0.ɵɵlistener(\"click\", function AppComponent_div_26_Template_button_click_8_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r1 = i0.ɵɵnextContext();\n      ctx_r1.theme.preset(\"minimal\");\n      return i0.ɵɵresetView(ctx_r1.themeMenuOpen = false);\n    });\n    i0.ɵɵtext(9, \"Minimal\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(10, \"div\", 31)(11, \"label\", 32)(12, \"input\", 33);\n    i0.ɵɵlistener(\"change\", function AppComponent_div_26_Template_input_change_12_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.onSakuraToggle($event));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(13, \" Sakura an \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"label\", 32)(15, \"input\", 33);\n    i0.ɵɵlistener(\"change\", function AppComponent_div_26_Template_input_change_15_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.theme.setBlossoms($event.target.checked));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(16, \" Blueten an \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(17, AppComponent_div_26_label_17_Template, 3, 1, \"label\", 34);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(4, _c0, ctx_r1.theme.sakura(), !ctx_r1.theme.sakura()));\n    i0.ɵɵadvance(12);\n    i0.ɵɵproperty(\"checked\", ctx_r1.theme.sakura());\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"checked\", ctx_r1.theme.blossoms());\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r1.theme.sakura());\n  }\n}\nfunction AppComponent_app_starfield_32_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-starfield\", 35);\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"density\", ctx_r1.theme.starDensity());\n  }\n}\nexport let AppComponent = /*#__PURE__*/(() => {\n  var _staticBlock;\n  class AppComponent {\n    constructor(api, i18n, theme, bursts, sound, toast) {\n      this.api = api;\n      this.i18n = i18n;\n      this.theme = theme;\n      this.bursts = bursts;\n      this.sound = sound;\n      this.toast = toast;\n      this.themeMenuOpen = false;\n      this.helpOpen = false;\n      this.listener = (count, at) => {\n        this.petal?.trigger(count, at);\n        this.sound.playBurst();\n      };\n      this.theme.apply();\n    }\n    ngAfterViewInit() {\n      this.bursts.on(this.listener);\n    }\n    ngOnDestroy() {\n      this.bursts.off(this.listener);\n    }\n    onLanguageSelect(event) {\n      const value = event.target?.value;\n      if (value === 'de' || value === 'en' || value === 'ja') this.i18n.set(value);\n    }\n    onSakuraToggle(event) {\n      const checked = event.target?.checked ?? false;\n      this.theme.setSakura(checked);\n    }\n    static #_ = _staticBlock = () => (this.ɵfac = function AppComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || AppComponent)(i0.ɵɵdirectiveInject(i1.ApiService), i0.ɵɵdirectiveInject(i2.I18nService), i0.ɵɵdirectiveInject(i3.ThemeService), i0.ɵɵdirectiveInject(i4.BurstService), i0.ɵɵdirectiveInject(i5.SoundService), i0.ɵɵdirectiveInject(i6.ToastService));\n    }, this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: AppComponent,\n      selectors: [[\"app-root\"]],\n      viewQuery: function AppComponent_Query(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵviewQuery(PetalBurstComponent, 5);\n        }\n        if (rf & 2) {\n          let _t;\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.petal = _t.first);\n        }\n      },\n      decls: 37,\n      vars: 17,\n      consts: [[\"globalBurst\", \"\"], [1, \"sakura-bg\", \"shadow\", \"relative\"], [\"routerLink\", \"/library\", 1, \"font-bold\", \"text-aizome\", \"text-xl\", \"mr-2\"], [\"class\", \"text-sm text-aizome\", 4, \"ngIf\"], [1, \"flex-1\"], [1, \"space-x-2\", \"text-sm\", \"flex\", \"items-center\"], [\"mat-button\", \"\", \"routerLink\", \"/library\"], [\"mat-button\", \"\", \"routerLink\", \"/upload\", 4, \"ngIf\"], [\"mat-button\", \"\", \"routerLink\", \"/admin\", 4, \"ngIf\"], [\"mat-button\", \"\", \"routerLink\", \"/settings\"], [1, \"ml-2\", \"border\", \"rounded\", \"p-1\", 3, \"change\"], [\"value\", \"de\", 3, \"selected\"], [\"value\", \"en\", 3, \"selected\"], [\"value\", \"ja\", 3, \"selected\"], [\"mat-button\", \"\", 3, \"click\", 4, \"ngIf\"], [\"mat-button\", \"\", \"routerLink\", \"/login\", 4, \"ngIf\"], [\"mat-button\", \"\", 3, \"click\"], [\"class\", \"absolute right-2 top-12 bg-white shadow rounded p-3 text-sm z-50 min-w-[220px]\", 3, \"ngClass\", 4, \"ngIf\"], [1, \"p-4\"], [1, \"p-4\", \"text-center\", \"text-xs\", \"text-gray-600\"], [3, \"enabled\", \"density\", \"speed\"], [3, \"density\", 4, \"ngIf\"], [3, \"close\", \"open\", \"dayMode\"], [1, \"text-sm\", \"text-aizome\"], [\"mat-button\", \"\", \"routerLink\", \"/upload\"], [\"mat-button\", \"\", \"routerLink\", \"/admin\"], [\"mat-button\", \"\", \"routerLink\", \"/login\"], [1, \"absolute\", \"right-2\", \"top-12\", \"bg-white\", \"shadow\", \"rounded\", \"p-3\", \"text-sm\", \"z-50\", \"min-w-[220px]\", 3, \"ngClass\"], [1, \"font-semibold\", \"mb-2\"], [1, \"space-x-2\", \"mb-2\"], [1, \"border\", \"px-2\", \"py-1\", \"rounded\", 3, \"click\"], [1, \"space-y-1\"], [1, \"flex\", \"items-center\", \"gap-2\"], [\"type\", \"checkbox\", 3, \"change\", \"checked\"], [\"class\", \"flex items-center gap-2\", 4, \"ngIf\"], [3, \"density\"]],\n      template: function AppComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          const _r1 = i0.ɵɵgetCurrentView();\n          i0.ɵɵelementStart(0, \"mat-toolbar\", 1)(1, \"a\", 2);\n          i0.ɵɵtext(2, \"Manga Shelf\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(3, \"app-sakura-branch\");\n          i0.ɵɵtemplate(4, AppComponent_span_4_Template, 2, 2, \"span\", 3);\n          i0.ɵɵelement(5, \"span\", 4);\n          i0.ɵɵelementStart(6, \"nav\", 5)(7, \"a\", 6);\n          i0.ɵɵtext(8);\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(9, AppComponent_a_9_Template, 2, 1, \"a\", 7)(10, AppComponent_a_10_Template, 2, 0, \"a\", 8);\n          i0.ɵɵelementStart(11, \"a\", 9);\n          i0.ɵɵtext(12);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(13, \"select\", 10);\n          i0.ɵɵlistener(\"change\", function AppComponent_Template_select_change_13_listener($event) {\n            i0.ɵɵrestoreView(_r1);\n            return i0.ɵɵresetView(ctx.onLanguageSelect($event));\n          });\n          i0.ɵɵelementStart(14, \"option\", 11);\n          i0.ɵɵtext(15, \"DE\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(16, \"option\", 12);\n          i0.ɵɵtext(17, \"EN\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(18, \"option\", 13);\n          i0.ɵɵtext(19, \"JA\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵtemplate(20, AppComponent_button_20_Template, 2, 0, \"button\", 14)(21, AppComponent_a_21_Template, 2, 0, \"a\", 15);\n          i0.ɵɵelementStart(22, \"button\", 16);\n          i0.ɵɵlistener(\"click\", function AppComponent_Template_button_click_22_listener() {\n            i0.ɵɵrestoreView(_r1);\n            return i0.ɵɵresetView(ctx.themeMenuOpen = !ctx.themeMenuOpen);\n          });\n          i0.ɵɵtext(23, \"Theme\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(24, \"button\", 16);\n          i0.ɵɵlistener(\"click\", function AppComponent_Template_button_click_24_listener() {\n            i0.ɵɵrestoreView(_r1);\n            return i0.ɵɵresetView(ctx.helpOpen = true);\n          });\n          i0.ɵɵtext(25, \"Help\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵtemplate(26, AppComponent_div_26_Template, 18, 7, \"div\", 17);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(27, \"main\", 18);\n          i0.ɵɵelement(28, \"router-outlet\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(29, \"footer\", 19);\n          i0.ɵɵtext(30, \" Nur fuer private Nutzung. Keine oeffentliche Verbreitung. \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(31, \"app-blossoms\", 20);\n          i0.ɵɵtemplate(32, AppComponent_app_starfield_32_Template, 1, 1, \"app-starfield\", 21);\n          i0.ɵɵelement(33, \"app-petal-burst\", null, 0);\n          i0.ɵɵelementStart(35, \"app-help-modal\", 22);\n          i0.ɵɵlistener(\"close\", function AppComponent_Template_app_help_modal_close_35_listener() {\n            i0.ɵɵrestoreView(_r1);\n            return i0.ɵɵresetView(ctx.helpOpen = false);\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(36, \"app-toast-container\");\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngIf\", ctx.api.email());\n          i0.ɵɵadvance(4);\n          i0.ɵɵtextInterpolate(ctx.i18n.t(\"library\"));\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.api.role() === \"admin\" || ctx.api.role() === \"editor\");\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.api.role() === \"admin\");\n          i0.ɵɵadvance(2);\n          i0.ɵɵtextInterpolate(ctx.i18n.t(\"settings\"));\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"selected\", ctx.i18n.lang() === \"de\");\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"selected\", ctx.i18n.lang() === \"en\");\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"selected\", ctx.i18n.lang() === \"ja\");\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngIf\", ctx.api.token());\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", !ctx.api.token());\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"ngIf\", ctx.themeMenuOpen);\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"enabled\", ctx.theme.blossoms())(\"density\", ctx.theme.blossomsDensity())(\"speed\", ctx.theme.blossomsSpeed());\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", !ctx.theme.sakura() && ctx.theme.starfieldEnabled());\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"open\", ctx.helpOpen)(\"dayMode\", ctx.theme.sakura());\n        }\n      },\n      dependencies: [CommonModule, i7.NgClass, i7.NgIf, RouterOutlet, RouterLink, MatToolbarModule, i8.MatToolbar, MatButtonModule, i9.MatButton, BlossomsComponent, StarfieldComponent, SakuraBranchComponent, PetalBurstComponent, HelpModalComponent, ToastContainerComponent],\n      encapsulation: 2\n    }));\n  }\n  _staticBlock();\n  return AppComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}