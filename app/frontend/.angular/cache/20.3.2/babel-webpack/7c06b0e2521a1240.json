{"ast":null,"code":"import * as i0 from \"@angular/core\";\nconst _c0 = [\"c\"];\nfunction BlossomsComponent_canvas_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵdomElement(0, \"canvas\", 2, 0);\n  }\n}\nexport let BlossomsComponent = /*#__PURE__*/(() => {\n  var _staticBlock;\n  class BlossomsComponent {\n    constructor() {\n      this.enabled = false;\n      this.density = 40;\n      this.speed = 1;\n      this.raf = 0;\n      this.petals = [];\n      this.resizeHandler = () => {};\n    }\n    ngAfterViewInit() {\n      if (!this.enabled) return;\n      const c = this.canvas.nativeElement;\n      const ctx = c.getContext('2d');\n      const resize = () => {\n        c.width = window.innerWidth;\n        c.height = window.innerHeight;\n      };\n      resize();\n      window.addEventListener('resize', resize);\n      this.resizeHandler = resize;\n      // seed\n      const n = Math.max(5, Math.min(200, this.density));\n      this.petals = [];\n      for (let i = 0; i < n; i++) this.petals.push(this.spawn(c));\n      const loop = () => {\n        ctx.clearRect(0, 0, c.width, c.height);\n        for (const p of this.petals) {\n          p.x += p.vx * this.speed;\n          p.y += p.vy * this.speed;\n          p.vx += 0.005 * this.speed;\n          p.rot += p.rotv * this.speed;\n          if (p.y > c.height + 20 || p.x > c.width + 20) Object.assign(p, this.spawn(c));\n          ctx.save();\n          ctx.translate(p.x, p.y);\n          ctx.rotate(p.rot);\n          ctx.fillStyle = 'rgba(249,213,229,0.9)';\n          ctx.beginPath();\n          ctx.ellipse(0, 0, 6, 4, p.r, 0, Math.PI * 2);\n          ctx.fill();\n          ctx.restore();\n        }\n        this.raf = requestAnimationFrame(loop);\n      };\n      this.raf = requestAnimationFrame(loop);\n    }\n    ngOnChanges(changes) {\n      if (changes['density'] || changes['speed']) {\n        // Re-init animation to reflect new density/speed\n        cancelAnimationFrame(this.raf);\n        if (this.canvas) {\n          this.ngAfterViewInit();\n        }\n      }\n    }\n    spawn(c) {\n      return {\n        x: Math.random() * c.width,\n        y: -10,\n        vx: -0.3 + Math.random() * 0.2,\n        vy: 0.8 + Math.random() * 1.4,\n        r: Math.random() * Math.PI,\n        rot: Math.random() * Math.PI,\n        rotv: (Math.random() - 0.5) * 0.02\n      };\n    }\n    ngOnDestroy() {\n      cancelAnimationFrame(this.raf);\n      window.removeEventListener('resize', this.resizeHandler);\n    }\n    static #_ = _staticBlock = () => (this.ɵfac = function BlossomsComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || BlossomsComponent)();\n    }, this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: BlossomsComponent,\n      selectors: [[\"app-blossoms\"]],\n      viewQuery: function BlossomsComponent_Query(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵviewQuery(_c0, 5);\n        }\n        if (rf & 2) {\n          let _t;\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.canvas = _t.first);\n        }\n      },\n      inputs: {\n        enabled: \"enabled\",\n        density: \"density\",\n        speed: \"speed\"\n      },\n      features: [i0.ɵɵNgOnChangesFeature],\n      decls: 1,\n      vars: 1,\n      consts: [[\"c\", \"\"], [\"class\", \"fixed inset-0 pointer-events-none\", 4, \"ngIf\"], [1, \"fixed\", \"inset-0\", \"pointer-events-none\"]],\n      template: function BlossomsComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵdomTemplate(0, BlossomsComponent_canvas_0_Template, 2, 0, \"canvas\", 1);\n        }\n        if (rf & 2) {\n          i0.ɵɵdomProperty(\"ngIf\", ctx.enabled);\n        }\n      },\n      encapsulation: 2\n    }));\n  }\n  _staticBlock();\n  return BlossomsComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}