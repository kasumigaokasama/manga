{"ast":null,"code":"import * as i0 from \"@angular/core\";\nconst _c0 = [\"c\"];\nfunction BlossomsComponent_canvas_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵdomElement(0, \"canvas\", 2, 0);\n  }\n}\nexport let BlossomsComponent = /*#__PURE__*/(() => {\n  var _staticBlock;\n  class BlossomsComponent {\n    constructor() {\n      this.enabled = false;\n      this.density = 40;\n      this.speed = 1;\n      this.raf = 0;\n      this.petals = [];\n      this.resizeHandler = () => {};\n      this.dpr = Math.max(1, Math.min(2, window.devicePixelRatio || 1));\n    }\n    ngAfterViewInit() {\n      this.initIfNeeded();\n    }\n    ngOnChanges(changes) {\n      if ('enabled' in changes) {\n        if (!this.enabled) {\n          this.destroy();\n        } else {\n          this.initIfNeeded(true);\n        }\n      }\n      if ((changes['density'] || changes['speed']) && this.enabled) {\n        this.initIfNeeded(true);\n      }\n    }\n    spawn(c) {\n      const vw = c.width / this.dpr;\n      const x = Math.random() * vw;\n      const y = -10 - Math.random() * 60;\n      const vy = 0.4 + Math.random() * 1.2;\n      const rot = Math.random() * Math.PI * 2;\n      const rotv = (Math.random() - 0.5) * 0.015;\n      const t = Math.random() * Math.PI * 2;\n      const tVel = 0.012 + Math.random() * 0.022;\n      const amp = 0.4 + Math.random() * 1.2;\n      const sx = 4 + Math.random() * 3;\n      const sy = 2 + Math.random() * 3;\n      const alpha = 0.75 + Math.random() * 0.25;\n      const hue = 330 + Math.random() * 20;\n      return {\n        x,\n        y,\n        vy,\n        rot,\n        rotv,\n        t,\n        tVel,\n        amp,\n        sx,\n        sy,\n        alpha,\n        hue\n      };\n    }\n    ngOnDestroy() {\n      this.destroy();\n    }\n    initIfNeeded(reinit = false) {\n      if (!this.enabled || !this.canvas) return;\n      if (reinit) this.destroy();\n      const c = this.canvas.nativeElement;\n      const ctx = c.getContext('2d');\n      this.ctx = ctx;\n      const resize = () => {\n        const w = window.innerWidth;\n        const h = window.innerHeight;\n        c.width = Math.floor(w * this.dpr);\n        c.height = Math.floor(h * this.dpr);\n        c.style.width = w + 'px';\n        c.style.height = h + 'px';\n        ctx.setTransform(this.dpr, 0, 0, this.dpr, 0, 0);\n      };\n      resize();\n      window.addEventListener('resize', resize);\n      this.resizeHandler = resize;\n      const n = Math.max(12, Math.min(220, Math.floor(this.density)));\n      this.petals = Array.from({\n        length: n\n      }, () => this.spawn(c));\n      const loop = () => {\n        if (!this.ctx) return;\n        ctx.clearRect(0, 0, c.width, c.height);\n        for (const p of this.petals) {\n          // horizontal sway via per-petal phase; gravity; small jitter\n          p.t += p.tVel * this.speed;\n          const wind = Math.sin(p.t) * p.amp;\n          const jitter = (Math.random() - 0.5) * 0.12 * this.speed;\n          p.vy += 0.0009 * this.speed;\n          p.x += wind + jitter;\n          p.y += p.vy;\n          p.rot += p.rotv * this.speed;\n          const vw = c.width / this.dpr;\n          const vh = c.height / this.dpr;\n          if (p.y > vh + 30 || p.x < -40 || p.x > vw + 40) Object.assign(p, this.spawn(c));\n          ctx.save();\n          ctx.translate(p.x * this.dpr, p.y * this.dpr);\n          ctx.rotate(p.rot);\n          ctx.fillStyle = `hsla(${p.hue},70%,90%,${p.alpha})`;\n          ctx.beginPath();\n          ctx.ellipse(0, 0, p.sx * this.dpr, p.sy * this.dpr, 0, 0, Math.PI * 2);\n          ctx.fill();\n          ctx.restore();\n        }\n        this.raf = requestAnimationFrame(loop);\n      };\n      this.raf = requestAnimationFrame(loop);\n    }\n    destroy() {\n      cancelAnimationFrame(this.raf);\n      window.removeEventListener('resize', this.resizeHandler);\n      this.ctx = undefined;\n      this.petals = [];\n    }\n    static #_ = _staticBlock = () => (this.ɵfac = function BlossomsComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || BlossomsComponent)();\n    }, this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: BlossomsComponent,\n      selectors: [[\"app-blossoms\"]],\n      viewQuery: function BlossomsComponent_Query(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵviewQuery(_c0, 5);\n        }\n        if (rf & 2) {\n          let _t;\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.canvas = _t.first);\n        }\n      },\n      inputs: {\n        enabled: \"enabled\",\n        density: \"density\",\n        speed: \"speed\"\n      },\n      features: [i0.ɵɵNgOnChangesFeature],\n      decls: 1,\n      vars: 1,\n      consts: [[\"c\", \"\"], [\"class\", \"fixed inset-0 pointer-events-none\", \"style\", \"z-index:9999\", 4, \"ngIf\"], [1, \"fixed\", \"inset-0\", \"pointer-events-none\", 2, \"z-index\", \"9999\"]],\n      template: function BlossomsComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵdomTemplate(0, BlossomsComponent_canvas_0_Template, 2, 0, \"canvas\", 1);\n        }\n        if (rf & 2) {\n          i0.ɵɵdomProperty(\"ngIf\", ctx.enabled);\n        }\n      },\n      encapsulation: 2\n    }));\n  }\n  _staticBlock();\n  return BlossomsComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}