{"ast":null,"code":"import _setFunctionName from \"C:/manga/node_modules/@babel/runtime/helpers/esm/setFunctionName.js\";\nvar __esDecorate = this && this.__esDecorate || function (ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n  function accept(f) {\n    if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\");\n    return f;\n  }\n  var kind = contextIn.kind,\n    key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n  var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n  var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n  var _,\n    done = false;\n  for (var i = decorators.length - 1; i >= 0; i--) {\n    var context = {};\n    for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n    for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n    context.addInitializer = function (f) {\n      if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\");\n      extraInitializers.push(accept(f || null));\n    };\n    var result = (0, decorators[i])(kind === \"accessor\" ? {\n      get: descriptor.get,\n      set: descriptor.set\n    } : descriptor[key], context);\n    if (kind === \"accessor\") {\n      if (result === void 0) continue;\n      if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n      if (_ = accept(result.get)) descriptor.get = _;\n      if (_ = accept(result.set)) descriptor.set = _;\n      if (_ = accept(result.init)) initializers.unshift(_);\n    } else if (_ = accept(result)) {\n      if (kind === \"field\") initializers.unshift(_);else descriptor[key] = _;\n    }\n  }\n  if (target) Object.defineProperty(target, contextIn.name, descriptor);\n  done = true;\n};\nvar __runInitializers = this && this.__runInitializers || function (thisArg, initializers, value) {\n  var useValue = arguments.length > 2;\n  for (var i = 0; i < initializers.length; i++) {\n    value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n  }\n  return useValue ? value : void 0;\n};\nimport { Component, ViewChild } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RouterLink, RouterOutlet } from '@angular/router';\nimport { MatToolbarModule } from '@angular/material/toolbar';\nimport { MatButtonModule } from '@angular/material/button';\nimport { BlossomsComponent } from './components/blossoms.component';\nimport { StarfieldComponent } from './components/starfield.component';\nimport { SakuraBranchComponent } from './components/sakura-branch.component';\nimport { PetalBurstComponent } from './components/petal-burst.component';\nimport { HelpModalComponent } from './components/help-modal.component';\nimport { ToastContainerComponent } from './components/toast-container.component';\nlet AppComponent = (_staticBlock => {\n  let _classDecorators = [Component({\n    selector: 'app-root',\n    standalone: true,\n    imports: [CommonModule, RouterOutlet, RouterLink, MatToolbarModule, MatButtonModule, BlossomsComponent, StarfieldComponent, SakuraBranchComponent, PetalBurstComponent, HelpModalComponent, ToastContainerComponent],\n    template: `\n    <mat-toolbar class=\"sakura-bg shadow relative\">\n      <a routerLink=\"/library\" class=\"font-bold text-aizome text-xl mr-2\">Manga Shelf</a>\n      <app-sakura-branch></app-sakura-branch>\n      <span class=\"text-sm text-aizome\" *ngIf=\"api.email()\">{{ api.email() }} ({{ api.role() }})</span>\n      <span class=\"flex-1\"></span>\n      <nav class=\"space-x-2 text-sm flex items-center\">\n        <a mat-button routerLink=\"/library\">{{ i18n.t('library') }}</a>\n        <a mat-button *ngIf=\"api.role()==='admin' || api.role()==='editor'\" routerLink=\"/upload\">{{ i18n.t('upload') }}</a>\n        <a mat-button *ngIf=\"api.role()==='admin'\" routerLink=\"/admin\">Admin</a>\n        <a mat-button routerLink=\"/settings\">{{ i18n.t('settings') }}</a>\n        <select class=\"ml-2 border rounded p-1\" (change)=\"onLanguageSelect($event)\">\n          <option value=\"de\" [selected]=\"i18n.lang()==='de'\">DE</option>\n          <option value=\"en\" [selected]=\"i18n.lang()==='en'\">EN</option>\n          <option value=\"ja\" [selected]=\"i18n.lang()==='ja'\">JA</option>\n        </select>\n        <button *ngIf=\"api.token()\" mat-button (click)=\"api.logout()\">Logout</button>\n        <a *ngIf=\"!api.token()\" mat-button routerLink=\"/login\">Login</a>\n        <button mat-button (click)=\"themeMenuOpen = !themeMenuOpen\">Theme</button>\n        <button mat-button (click)=\"helpOpen = true\">Help</button>\n      </nav>\n      <div *ngIf=\"themeMenuOpen\" class=\"absolute right-2 top-12 bg-white shadow rounded p-3 text-sm z-50 min-w-[220px]\"\n           [ngClass]=\"{'bg-white text-aizome': theme.sakura(), 'bg-slate-800 text-slate-100': !theme.sakura()}\">\n        <div class=\"font-semibold mb-2\">Theme Presets</div>\n        <div class=\"space-x-2 mb-2\">\n          <button class=\"border px-2 py-1 rounded\" (click)=\"theme.preset('sakura-day'); themeMenuOpen=false\">Sakura Day</button>\n          <button class=\"border px-2 py-1 rounded\" (click)=\"theme.preset('sakura-night'); themeMenuOpen=false\">Night</button>\n          <button class=\"border px-2 py-1 rounded\" (click)=\"theme.preset('minimal'); themeMenuOpen=false\">Minimal</button>\n        </div>\n        <div class=\"space-y-1\">\n          <label class=\"flex items-center gap-2\">\n            <input type=\"checkbox\" [checked]=\"theme.sakura()\" (change)=\"onSakuraToggle($event)\" /> Sakura an\n          </label>\n          <label class=\"flex items-center gap-2\">\n            <input type=\"checkbox\" [checked]=\"theme.blossoms()\" (change)=\"theme.setBlossoms(($event.target as HTMLInputElement).checked)\" /> Blueten an\n          </label>\n          <label class=\"flex items-center gap-2\" *ngIf=\"!theme.sakura()\">\n            <input type=\"checkbox\" [checked]=\"theme.starfieldEnabled()\" (change)=\"theme.setStarfieldEnabled(($event.target as HTMLInputElement).checked)\" /> Sterne an\n          </label>\n        </div>\n      </div>\n    </mat-toolbar>\n    <main class=\"p-4\">\n      <router-outlet />\n    </main>\n    <footer class=\"p-4 text-center text-xs text-gray-600\">\n      Nur fuer private Nutzung. Keine oeffentliche Verbreitung.\n    </footer>\n    <app-blossoms [enabled]=\"theme.blossoms() && theme.sakura()\" [density]=\"theme.blossomsDensity()\" [speed]=\"theme.blossomsSpeed()\"></app-blossoms>\n    <app-starfield *ngIf=\"!theme.sakura() && theme.starfieldEnabled()\" [density]=\"theme.starDensity()\"></app-starfield>\n    <app-petal-burst #globalBurst></app-petal-burst>\n    <app-help-modal [open]=\"helpOpen\" [dayMode]=\"theme.sakura()\" (close)=\"helpOpen=false\"></app-help-modal>\n    <app-toast-container></app-toast-container>\n  `\n  })];\n  let _classDescriptor;\n  let _classExtraInitializers = [];\n  let _classThis;\n  let _petal_decorators;\n  let _petal_initializers = [];\n  let _petal_extraInitializers = [];\n  var AppComponent = (class {\n    constructor(api, i18n, theme, bursts, sound, toast) {\n      this.api = api;\n      this.i18n = i18n;\n      this.theme = theme;\n      this.bursts = bursts;\n      this.sound = sound;\n      this.toast = toast;\n      this.themeMenuOpen = false;\n      this.helpOpen = false;\n      this.petal = __runInitializers(this, _petal_initializers, void 0);\n      this.listener = (__runInitializers(this, _petal_extraInitializers), (count, at) => {\n        this.petal?.trigger(count, at);\n        this.sound.playBurst();\n      });\n      this.theme.apply();\n    }\n    ngAfterViewInit() {\n      this.bursts.on(this.listener);\n    }\n    ngOnDestroy() {\n      this.bursts.off(this.listener);\n    }\n    onLanguageSelect(event) {\n      const value = event.target?.value;\n      if (value === 'de' || value === 'en' || value === 'ja') this.i18n.set(value);\n    }\n    onSakuraToggle(event) {\n      const checked = event.target?.checked ?? false;\n      this.theme.setSakura(checked);\n    }\n    static #_ = _staticBlock = () => (_setFunctionName(this, \"AppComponent\"), _classThis = this, (() => {\n      const _metadata = typeof Symbol === \"function\" && Symbol.metadata ? Object.create(null) : void 0;\n      _petal_decorators = [ViewChild(PetalBurstComponent)];\n      __esDecorate(null, null, _petal_decorators, {\n        kind: \"field\",\n        name: \"petal\",\n        static: false,\n        private: false,\n        access: {\n          has: obj => \"petal\" in obj,\n          get: obj => obj.petal,\n          set: (obj, value) => {\n            obj.petal = value;\n          }\n        },\n        metadata: _metadata\n      }, _petal_initializers, _petal_extraInitializers);\n      __esDecorate(null, _classDescriptor = {\n        value: _classThis\n      }, _classDecorators, {\n        kind: \"class\",\n        name: _classThis.name,\n        metadata: _metadata\n      }, null, _classExtraInitializers);\n      AppComponent = _classThis = _classDescriptor.value;\n      if (_metadata) Object.defineProperty(_classThis, Symbol.metadata, {\n        enumerable: true,\n        configurable: true,\n        writable: true,\n        value: _metadata\n      });\n      __runInitializers(_classThis, _classExtraInitializers);\n    })(), this);\n  }, _staticBlock());\n  return AppComponent = _classThis;\n})();\nexport { AppComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}